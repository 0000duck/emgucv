Index: CMakeLists.txt
===================================================================
--- CMakeLists.txt	(revision 4863)
+++ CMakeLists.txt	(working copy)
@@ -653,14 +653,21 @@
 					set(OPENCV_LINKER_LIBS ${OPENCV_LINKER_LIBS} tbb)
 				else()
 				    get_filename_component(_TBB_LIB_PATH "${TBB_INCLUDE_DIR}/../lib" ABSOLUTE)                         	
-				   
-					if(${CMAKE_SYSTEM_PROCESSOR} MATCHES amd64*|x86_64*)
+				    if (MSVC)
+                       if(CMAKE_CL_64)
+                         set(_TBB_LIB_PATH "${_TBB_LIB_PATH}/intel64")
+                       else()
+                         set(_TBB_LIB_PATH "${_TBB_LIB_PATH}/ia32")
+                       endif()
+                    else()
+					  if(${CMAKE_SYSTEM_PROCESSOR} MATCHES amd64*|x86_64*)
 						set(_TBB_LIB_PATH "${_TBB_LIB_PATH}/intel64")
-                    endif()                   
-                    if(${CMAKE_SYSTEM_PROCESSOR} MATCHES x86*|i386*|i686*)
+                      endif()                   
+                      if(${CMAKE_SYSTEM_PROCESSOR} MATCHES x86*|i386*|i686*)
 						set(_TBB_LIB_PATH "${_TBB_LIB_PATH}/ia32")
+					  endif()
 					endif()

 					if (MSVC80)
 					   set(_TBB_LIB_PATH "${_TBB_LIB_PATH}/vc8")
 					elseif(MSVC90)
Index: modules/legacy/src/3dtracker.cpp
===================================================================
--- modules/legacy/src/3dtracker.cpp	(revision 4863)
+++ modules/legacy/src/3dtracker.cpp	(working copy)
@@ -331,7 +331,7 @@
     int i;
     int x, y;
     CvPoint prev_pt = { 0, 0 };
-    static const CvScalar rgb_colors[] = {
+    static CvScalar rgb_colors[] = {
         {{0,0,255}},
         {{0,128,255}},
         {{0,200,200}},
@@ -339,10 +339,10 @@
         {{200,200,0}},
         {{255,0,0}},
         {{255,0,255}} };
-    static const CvScalar gray_colors[] = {
+    static CvScalar gray_colors[] = {
         {{80}}, {{120}}, {{160}}, {{200}}, {{100}}, {{140}}, {{180}}
     };
-    const CvScalar* colors = img->nChannels == 3 ? rgb_colors : gray_colors;
+    CvScalar* colors = img->nChannels == 3 ? rgb_colors : gray_colors;
 
     CvScalar color = colors[0];
     for (y = 0, i = 0; y < etalon_size.height; y++)
