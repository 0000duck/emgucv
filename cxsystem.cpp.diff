Index: cxsystem.cpp
===================================================================
--- cxsystem.cpp	(revision 1739)
+++ cxsystem.cpp	(working copy)
@@ -174,6 +174,12 @@
     static volatile int* p = 0;
     *p = 0;
 #endif
+    
+    if (customCvErrorCallback != 0) 
+    {
+       customCvErrorCallback(exc.code, exc.func.c_str(), exc.err.c_str(), exc.file.c_str(), exc.line, 0);
+       return;
+    }
     throw exc;
 }
 
@@ -245,11 +251,12 @@
     return cv::getThreadNum();
 }
 
-
 CV_IMPL CvErrorCallback
-cvRedirectError( CvErrorCallback, void*, void** )
+cvRedirectError( CvErrorCallback cb, void*, void** )
 {
-    return 0;
+    CvErrorCallback old_CvErrorCallback = customCvErrorCallback;
+    customCvErrorCallback = cb;
+    return old_CvErrorCallback;
 }
 
 CV_IMPL int cvNulDevReport( int, const char*, const char*,
